<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="table_settings.css">
    <title>Title</title>
</head>
<body>
<div id="main-container">
    <div id="workspace">
        <div class="container-draggable item">
            <button class="draggable" draggable="true">ğŸ¦Š</button>
            <button class="draggable" draggable="true">ğŸ¸</button>
        </div>
        <div class="container-draggable item">
            <button class="draggable" draggable="true">ğŸ¶</button>
            <button class="draggable" draggable="true">ğŸ±</button>
        </div>

        <div class="container-draggable item">
            <button class="draggable" draggable="true">ğŸ¶</button>
            <button class="draggable" draggable="true">ğŸ±</button>
        </div>

        <div class="container-line item">
            <div class="container-draggable" draggable="true">
                <button class="draggable" draggable="true">ğŸ¦Š</button>
                <button class="draggable" draggable="true">ğŸ¸</button>
            </div>
            <div class="container-draggable" draggable="true">
                <button class="draggable" draggable="true">ğŸ¶</button>
                <button class="draggable" draggable="true">ğŸ±</button>
            </div>

            <div class="container-draggable" draggable="true">
                <button class="draggable" draggable="true">ğŸ¶</button>
                <button class="draggable" draggable="true">ğŸ±</button>
            </div>
        </div>

        <div class="container-line item">
            <div>
                <h3 style="margin: 0px" draggable="false">Area1</h3>
            </div>
            <div class="container-draggable" draggable="true">
                <button class="draggable" draggable="true">ğŸ¦Š</button>
                <button class="draggable" draggable="true">ğŸ¸</button>
            </div>
            <div class="container-draggable" draggable="true">
                <button class="draggable" draggable="true">ğŸ¶</button>
                <button class="draggable" draggable="true">ğŸ±</button>
            </div>

            <div class="container-draggable" draggable="true">
                <button class="draggable" draggable="true">ğŸ¶</button>
                <button class="draggable" draggable="true">ğŸ±</button>
            </div>
        </div>
    </div>
    <div class="floating-box" id="zoom-container">
        <button onclick="zoomIn()" class="zoom-btn">+</button>
        <button onclick="zoomOut()" class="zoom-btn">-</button>
    </div>
    <div class="floating-box waste-btn" id="waste-container">
        ğŸ—‘
    </div>

    <div id="tool-container">
        <div style="height: 32%">
            <h3 style="margin: 0px; color: white;">Table</h3>
            <div class="tool-container-detail">
                <div style="justify-content: center; align-items: center; display: flex; height: 100%">
                    <div class="table-container">
                        <div style="height: 80%; justify-content: center; align-items: center; display: flex;">
                            <button data-table-id="1" class="draggable resource" draggable="true" style="font-size: 7px;">
                                <h2 style="margin: 3px">T 1<br>
                                    00:00</h2>
                            </button>
                        </div>
                        <p><1 ì¸ì„></p>
                    </div>
                    <div class="table-container">
                        <div style="height: 80%; justify-content: center; align-items: center; display: flex;">

                            <button data-table-id="1" class="draggable resource" draggable="true" style="font-size: 8px; width: 90px; height: 90px;">
                                <h2 style="margin: 3px">T 1<br>
                                    00:00</h2>
                            </button>
                        </div>
                        <p><4 ì¸ì„></p>
                    </div>
                </div>
            </div>
        </div>
        <div style="height: 32%">
            <h3 style="margin: 0px; color: white;">Line</h3>
            <div class="tool-container-detail"
                 style="display: grid; grid-template-rows: 1fr 1fr">
                <div class="container-draggable resource" draggable="true" style="flex-direction: column;  text-align: left" >
                    Vertical
                </div>
                <div class="container-draggable resource" draggable="true">
                    Horizontal
                </div>
            </div>
        </div>
        <div style="height: 32%">
            <h3 style="margin: 0px; color: white;">Area</h3>
            <div class="tool-container-detail"  style="display: grid; grid-template-rows: 1fr 1fr">
                <div class="container-line item resource" draggable="true" style="flex-direction: column;">
                    <h3 style="margin: 0px">Vertical</h3>
                </div>
                <div class="container-line item resource" draggable="true" style="flex-direction: row">
                    <h3 style="margin: 0px; flex-direction: column">Horizontal</h3>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- ì‚­ì œë¡œì§1 - ì‹¤íŒ¨ -->
<!-- ì‚­ì œí•  ìˆ˜ ìˆëŠ” ì¢…ë¥˜ê°€ ë‹¤ì–‘í•´ì„œ ì²˜ë¦¬í•˜ê¸° ì–´ë ¤ì›€... -->
<!--
<script>
    const wasteBasket = document.getElementById("waste-container");
    var removeTarget;
    var active = false;

    // wasteBasket.addEventListener("dragover", e => {
    //     over()
    // })
    // wasteBasket.addEventListener("dragleave", e => {
    //     leave()
    // })
    wasteBasket.addEventListener("dragover", over)
    wasteBasket.addEventListener("dragleave", leave)
    wasteBasket.addEventListener("mouseover", over)
    wasteBasket.addEventListener("mouseleave", leave)


    function over() {
        if (active) return;

        removeTarget = document.querySelector('.dragging') || document.querySelector('.drag')
        console.log(`remove-target : ${removeTarget}`)
        if (!removeTarget) return

        removeTarget.style.display = "none"
        active = true;
    }

    function leave() {
        if (active) {
            removeTarget.style.display = "block"
        }
        active = false;
    }


</script>
-->

<!-- ì‚­ì œë¡œì§2 -->
<!-- ë¶€ë¶„ ì„±ê³µ : item ìš”ì†ŒëŠ” ë˜ëŠ”ë° , draggable ìš”ì†ŒëŠ” ì•ˆë¨ -->
<!-- draggable ëŠ” waste_basket ì—ì„œ dragoverë¡œ ì²˜ë¦¬í•´ì•¼í•  ê²ƒ ê°™ë‹¤.  -->
<script>
    //divê°€ ì¤‘ì²©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë©”ì„œë“œ
    function isOverlapping(x, y) {
        const rect1 = x;
        const rect2 = y;

        return !(
            rect1.top > rect2.bottom ||
            rect1.right < rect2.left ||
            rect1.bottom < rect2.top ||
            rect1.left > rect2.right
        );
    }

    let inWasteBasket = false;

    //ì“°ë ˆê¸°í†µ ì•ˆìœ¼ë¡œ ì™”ì„ ë•Œ íŒë‹¨í•´ì„œ íš¨ê³¼ë¥¼ ì£¼ëŠ” í•¨ìˆ˜
    function wasteIn(remove, position = remove.getBoundingClientRect()) {
        if (isOverlapping(position,
            wasteBasket.getBoundingClientRect())) { //ì“°ë ˆê¸°í†µ ì•ˆìœ¼ë¡œ ë“¤ì–´ì™”ë‹¤ë©´
            if (inWasteBasket) return; //í´ë˜ìŠ¤ê°€ ê³„ì† ì¶”ê°€ë˜ëŠ” ê²½ìš°ë¥¼ ë°©ì§€í•œë‹¤.

            //css ì˜µì…˜ì„ ì¤€ë‹¤.
            remove.classList.add("waste-in-object");
            wasteBasket.classList.add("waste-in");
            inWasteBasket = true;
        } else { //ê²¹ì¹˜ì§€ ì•Šì•˜ë‹¤ë©´ --> ì“°ë ˆê¸°í†µ ë°–ìœ¼ë¡œ ë‚˜ì™”ë‹¤ë©´
            //ì¶”ê°€í–ˆë˜ css ì˜µì…˜ì„ ì œê±°í•œë‹¤.
            remove.classList.remove("waste-in-object");
            wasteBasket.classList.remove("waste-in");
            inWasteBasket = false;
        }
    }

    function setRemoveItemEvent(item){
        //ë§ˆìš°ìŠ¤ ì˜¤ë²„ë¥¼ í•  ë•Œ ì“°ë ˆê¸°í†µ ì•ˆì— ê°ì²´ê°€ ìˆë‹¤ë©´ ìƒ‰ ë³€ê²½ ë° í”Œë˜ê·¸ ì„¤ì •
        item.addEventListener("mousemove", () => wasteIn(item));
        //ë§ˆìš°ìŠ¤ê°€ ëë‚¬ì„ ë•Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸
        item.addEventListener("mouseup", () => {
            if (isOverlapping(wasteBasket.getBoundingClientRect(),
                item.getBoundingClientRect())) item.remove(); //ë§ˆìš°ìŠ¤ë¥¼ ë†“ì€ ê³³ì´ ê°ì²´ ì•ˆì— ìˆë‹¤ë©´ ê·¸ ìš”ì†Œë¥¼ ì‚¬ì í•˜ê² ë‹¤.
            wasteBasket.classList.remove("waste-in");
        })
    }

    function setRemoveDragEvent(drag){
        drag.addEventListener("drag", e => {
            wasteIn(drag, new DOMRect(e.clientX, e.clientY, 1, 1))
        })
        drag.addEventListener("dragend", e => {
            if (isOverlapping(wasteBasket.getBoundingClientRect(),
                new DOMRect(e.clientX, e.clientY, 1, 1))) drag.remove();
            wasteBasket.classList.remove("waste-in"); //ì¢…ë£Œ ì‹œì ì— ê²°ê³¼ì— ìƒê´€ì—†ì´ íœ´ì§€í†µì„ ì›ë˜ëŒ€ë¡œ í•œë‹¤.
        })
    }

    //ììœ ë¡­ê²Œ ì›€ì§ì¼ ìˆ˜ ìˆëŠ” ìš”ì†Œë“¤
    const removableItemList = document.querySelectorAll(".item");

    //ë¶™ì—¬ì§€ëŠ” ìš”ì†Œë“¤
    const removableDragList = document.querySelectorAll(".draggable, .container-draggable")
    const wasteBasket = document.getElementById("waste-container");

    removableItemList.forEach(removable => {
       setRemoveItemEvent(removable);
    })

    removableDragList.forEach(removable => {
        setRemoveDragEvent(removable);
    })
</script>

<!-- resource ë¡œì§ -->
<script>
    let resourceDragend;
    //ëª¨ë“  ìì›ì„ ê°€ì ¸ì˜¨ë‹¤.
    let resources = document.querySelectorAll(".resource");

    resources.forEach(resource => {
        if(resource.classList.contains("item")){
            resource.addEventListener("drag", e => {
                resourceDragend = resource;
            })
        }
    })

</script>

<!-- ìë¦¬ ìŠ¤ìœ„ì¹­ ë¡œì§ -->
<script>
    let isDrag = false;
    //resourceë¥¼ ê°€ì ¸ì˜¨ë‹¤.
    //let resourceTableContainer = document.q(".resource.draggable").values();

    //ë¶™ì´ëŠ” ìš”ì†Œë“¤ ê°€ì ¸ì˜¨ë‹¤.
    const draggables = document.querySelectorAll(".draggable");
    draggables.forEach(container => {
        setDraggableEvent(container);
    })

    //ëª¨ë“  1ë‹¨ê³„ ì»¨í…Œì´ë„ˆë¥¼ ê°€ì ¸ì˜¨ë‹¤.
    const draggableContainers = document.querySelectorAll(".container-draggable");
    draggableContainers.forEach(container => {
        setDraggableEvent(container);

        if(!container.classList.contains("resource")) {
            setContainerAttachEvent(container, "draggable");//ì´ ì»¨í…Œì´ì— ë‹´ì„ ìˆ˜ ìˆëŠ” ìš”ì†Œ
        }
    })

    //ëª¨ë“  2ë‹¨ê³„ ì»¨í…Œì´ë„ˆë¥¼ ê°€ì ¸ì˜¨ë‹¤.
    const lineContainers = document.querySelectorAll(".container-line");
    lineContainers.forEach(container => {
        if(!container.classList.contains("resource")) {
            setContainerAttachEvent(container, "container-draggable"); //ì´ ì»¨í…Œì´ì— ë‹´ì„ ìˆ˜ ìˆëŠ” ìš”ì†Œ
        }
    })

    //ë“œë ˆê·¸
    function setDraggableEvent(draggable) {
        //ë“œë ˆê·¸ê°€ ì‹œì‘ëœ ê²½ìš° ìƒíƒœë¥¼ ë³€ê²½
        draggable.addEventListener("dragstart", e => {
            e.stopPropagation()
            isDrag = true;
            draggable.classList.add("dragging");
        });
        //ë“œë ˆê·¸ê°€ ëë‚˜ë©´ ìƒíƒœë¥¼ ì¢…ë£Œí•œë‹¤.
        draggable.addEventListener("dragend", e => {
            e.stopPropagation()
            isDrag = false;
            draggable.classList.remove("dragging");
        });
    }


    function setContainerAttachEvent(container, targetType) {
        if(targetType === undefined){
            if(container.classList.contains("container-draggable"))
                targetType = "draggable";
            else if(container.classList.contains("container-line"))
                targetType = "container-draggable";
        }
        const isHorizontal = getComputedStyle(container).flexDirection === "row";

        //ë§ˆìš°ìŠ¤ê°€ container ì˜ì—­ìœ¼ë¡œ ì´ë™í–ˆë‹¤ë©´
        container.addEventListener("dragover", e => { //ë“œë ˆê·¸ ì˜¤ë²„ ìƒíƒœë©´ ê³„ì† ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸
            //ëª¨ë“  ì»¨í…Œì´ë„ˆë“¤ì— ëŒ€í•´ì„œ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•œë‹¤.
            let draggable = document.querySelector(".dragging"); //ì„ íƒëœ í•­ëª©ì„ ê°€ì ¸ì˜¨ë‹¤.
            if (draggable === null) return;
            if (!draggable.classList.contains(targetType)) return //containerì— ë„£ì„ ìˆ˜ ìˆëŠ” í•­ëª©ì¸ì§€ í™•ì¸í•œë‹¤.


            e.preventDefault(); //ì–´ë–¤ ì˜ë¯¸ì¸ì§€ ì˜ ëª¨ë¥´ê² êµ°... íŠ¹ì • ì´ë²¤íŠ¸ë¥¼ ì¤‘ì‹œí‚¤ëŠ” ê²ƒ ê°™ê¸´í•œë°...
            e.stopPropagation(); //ë¶€ëª¨ ê°ì²´ë¡œ ì˜ˆì™¸ ì „íŒŒ ë°©ì§€

            const afterElement = getDragAfterElement(container, e, targetType, isHorizontal); //ë§ˆìš°ìŠ¤ ì¢Œí‘œì—ì„œ ê°€ì¥ ì˜¤ë¥¸ìª½ì— ìˆëŠ” í•­ëª©ì„ ê°€ì ¸ì˜¨ë‹¤.

            if (draggable.classList.contains("resource")) { //ì‚­ì œë˜ì§€ ì•ŠëŠ” ìš”ì†Œë¼ê³  í•˜ë©´
                let x = draggable.cloneNode(true);

                //ì´ë²¤íŠ¸ ë°”ì¸ë”©
                setDraggableEvent(x);
                setRemoveDragEvent(x);
                if(draggable.classList.contains("container-draggable")) {
                    setContainerAttachEvent(draggable, "draggable");
                    draggable.innerText = draggable.innerText.trim().substring(0, 1);
                }

                if(x.classList.contains("draggable")){
                    x.dataset.tableId = (Number(draggable.dataset.tableId) + 1).toString();

                    x.innerHTML = `<h2 style="margine: 3px">T ${x.dataset.tableId}<br>00:00</h2>`

                }

                x.classList.remove("dragging");
                draggable.classList.remove("resource");
                draggable.after(x);
            }

            if (afterElement === undefined) { //ì˜¤ë¥¸ìª½ì— í•­ëª©ì´ ì—†ë‹¤ë©´
                container.appendChild(draggable); //ê°€ì¥ ë’¤ì— ì¶”ê°€í•´ì¤€ë‹¤.
            } else {
                container.insertBefore(draggable, afterElement);
            }
        });
    }

    //ì»¨í…Œì´í„° ë‚´ì— ì„ íƒë˜ì§€ ì•Šì€ í•­ëª©ë“¤ ì¤‘ì— ë§ˆìš°ìŠ¤ ì™¼ì©ì— ìˆëŠ” í•­ëª©ì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜
    function getDragAfterElement(container, e, targetType, isHorizontal) {
        const draggableElements = [
            //... -> ë°°ì—´ë¡œ ê°€ì ¸ì˜¨ë‹¤.
            ...container.querySelectorAll(`.${targetType}:not(.dragging)`), // ì»¨í…Œì´ë„ˆ ëª©ë¡ì¤‘ì— targetType ìš”ì†Œì¤‘ dragging ì´ ì•„ë‹Œ ê²ƒì„ ê°€ì ¸ì˜¨ë‹¤.
        ];

        //ì„ íƒë˜ì§€ ì•Šì€ í•­ëª©ë“¤ì˜ ë§ˆìš°ìŠ¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê°€ì¥ ì˜¤ë¥¸ìª½ì— ìˆëŠ” í•­ëª©ì„ ê°€ì ¸ì˜¨ë‹¤.
        return draggableElements.reduce( //ì½œë°± ë©”ì„œë“œë¥¼ ë°°ì—´ ë§Œí¼ ì‹¤í–‰í•˜ê³  í•˜ë‚˜ì˜ ê°’ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
            (closest, child) => {
                const box = child.getBoundingClientRect(); //ë„í˜• ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
                //ë§ˆìš°ìŠ¤ xì¢Œí‘œ - ë°•ìŠ¤ ì™¼ìª½ ìœ„ì¹˜ - ë°•ìŠ¤ ë„“ì´ / 2
                //affset ê°’ì´ ìŒìˆ˜ë¼ë©´ ë§ˆìš°ìŠ¤ ê¸°ì¤€ìœ¼ë¡œ ë°•ìŠ¤ ì¤‘ì‹¬ì´ ì˜¤ë¥¸ìª½ì— ìˆê³  ì–‘ìˆ˜ë¼ë©´ ì™¼ìª½ì— ìˆë‹¤.(ë°•ìŠ¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë§ˆìš°ìŠ¤ëŠ” ì™¼ìª½, ì˜¤ë¥¸ìª½ì— ìˆë‹¤.)
                let offset;
                if (isHorizontal)
                    offset = e.clientX - (box.left + box.width / 2);
                else
                    offset = e.clientY - (box.top + box.height / 2);

                //ë§ˆìš°ìŠ¤ ì¢Œí‘œê°€ ë„í˜•ë³´ë‹¤ ì™¼ìª½ì— ìˆê³  ì „ í•­ëª©ë³´ë‹¤ 0ì— ê°€ê¹ë‹¤ë©´ offsetê°’ê³¼ í•­ëª©ì„ ê°±ì‹ 

                if (offset < 0 && offset > closest.offset) {
                    return {offset: offset, element: child};
                } else { //ì•„ë‹ˆë©´ ì›ë˜ ê°’ ë‹¤ì‹œ ê°±ì‹ 
                    return closest;
                }
            },
            {offset: Number.NEGATIVE_INFINITY}
        ).element;
    }
</script>

<!-- ììœ ë¡­ê²Œ ì›€ì§ì´ëŠ” ë¡œì§ -->
<script>
    //itemë¥¼ ìê²¨ì˜¨ë‹¤.
    var dragItem = document.querySelectorAll(".item");
    //containerë¥¼ ê°€ì ¸ì˜¨ë‹¤.
    var container = document.querySelector("#workspace");

    var active = false;
    var target
    var currentX;
    var currentY;
    var initialX;
    var initialY;
    //translate3dì— ìˆëŠ” ê°’ì„ ë°˜ì˜í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— Offset ê°’ì„ ì €ì¥í•´ì•¼ ëœë‹¤.
    var itemOffPositionMap = new Map();
    dragItem.forEach(item => {
        if(item.classList.contains("resource"))
            return;
        itemOffPositionMap.set(item, {x: 0, y: 0})
    })

    //í„°ì¹˜ ì´ë²¤íŠ¸ì— ëŒ€í•œ ì²˜ë¦¬
    container.addEventListener("touchstart", dragStart, false);
    container.addEventListener("touchend", dragEnd, false);
    container.addEventListener("touchmove", drag, false);
    //ë§ˆìš°ìŠ¤ í´ë¦­ì— ëŒ€í•œ ì´ë²¤íŠ¸ ì²˜ë¦¬
    container.addEventListener("mousedown", dragStart, false);
    container.addEventListener("mouseup", dragEnd, false);
    container.addEventListener("mousemove", drag, false);

    //resourceê°€ drop ëœ ê²½ìš°
    container.addEventListener("drop", e => {
        e.preventDefault();
        if(resourceDragend === undefined) return;
        let clone = resourceDragend.cloneNode(true); //ê¹Šì€ ë³µì‚¬

        //itemì— ë§ëŠ” ì†ì„±ìœ¼ë¡œ ì´ˆê¸°í™”
        clone.classList.remove("resource");
        clone.draggable = false;
        clone.style.position = "absolute"
        container.appendChild(clone);

        //ì¤‘ì‹¬ì„ ê¸°ì¤€ìœ¼ë¡œ ì¢Œí‘œ êµ¬í•˜ê¸° ë° mapì— ë“±ë¡
        var initPosition = {x : e.clientX - container.getBoundingClientRect().width / 2,
            y : e.clientY - container.getBoundingClientRect().height / 2};
        itemOffPositionMap.set(clone, initPosition);

        //êµ¬í•œ ì¢Œí‘œë¡œ ì´ë™ ë°
        setTranslate(initPosition.x, initPosition.y, clone);

        //í…ìŠ¤íŠ¸ ë³€ê²½
        clone.innerHTML = `<h3 style="margin: 0px">${clone.innerText.trim().substring(0, 1)}</h3>`;


        //ì´ë²¤íŠ¸ ë°”ì¸ë“œ
        setContainerAttachEvent(clone);
        setRemoveItemEvent(clone);

        resourceDragend = undefined;
    });

    container.addEventListener("dragover", e => e.preventDefault());

    function dragStart(e) {
        if(isDrag) return;
        if (active || e.target === container) return
        if (e.target.draggable == true) return;
        target = e.target

        while (target.parentNode !== container) {
            target = target.parentNode;
        }

        if (itemOffPositionMap.has(target)) { //dragItem ì´ í´ë¦°ëœ ê²½ìš°
            let offset = itemOffPositionMap.get(target);

            if (e.type === "touchstart") {
                initialX = e.touches[0].clientX - offset.x
                initialY = e.touches[0].clientY - offset.y
            } else {
                initialX = e.clientX - offset.x;
                initialY = e.clientY - offset.y;
            }

            active = true;
        }
    }

    function dragEnd() {
        if (active) { //dragItem ì´ í´ë¦°ëœ ê²½ìš°
            var offset = itemOffPositionMap.get(target)
            offset.x = currentX
            offset.y = currentY
        }
        active = false;
    }

    function drag(e) {
        if (active) { //dragItem ì„ íƒëœ ê²½ìš°
            e.preventDefault();

            if (e.type === "touchmove") { //í„°ì¹˜í•œ ìƒíƒœë¡œ ì´ë™í•œ ê²½ìš°
                currentX = e.touches[0].clientX - initialX;
                currentY = e.touches[0].clientY - initialY;
            } else { //ë§ˆìš°ìŠ¤ë¡œ ì´ë™í•˜ëŠ” ê²½ìš°
                currentX = e.clientX - initialX;
                currentY = e.clientY - initialY;
            }

            setTranslate(currentX, currentY, target);
        }
    }

    function setTranslate(xPos, yPos, el) {
        el.style.transform = "translate3d(" + xPos + "px, " + yPos + "px, 0) scale(" + scale + ")";
    }


</script>

<!-- ì¤Œì¸ ì•„ì›ƒ -->
<script>
    let scale = 1;

    function zoomIn() {
        scale += 0.1;
        itemOffPositionMap.values()
        itemOffPositionMap.forEach((value, key) => {
            setTranslate(value.x, value.y, key);
        })

    }

    function zoomOut() {
        if (scale <= 0.1) return

        scale -= 0.1;
        itemOffPositionMap.forEach((value, key) => {
            setTranslate(value.x, value.y, key);
        })
    }
</script>
</body>
</html>